{"version":3,"sources":["components/TableItem.js","components/Table.js","components/arrow-top.svg","components/MsgToUpload.js","components/spinner.svg","components/Spinner.js","App.js","index.js"],"names":["TdItem","text","valid","className","TableItem","user","validFields","id","full_name","phone","email","age","experience","yearly_income","has_children","license_states","expiration_date","license_number","duplicate_with","Table","users","map","MsgToUpload","src","arrow","alt","Spinner","msg","spinner","App","state","headers","data","error","loading","parserOptions","header","skipEmptyLines","beforeFirstChunk","setState","transformHeader","item","toLowerCase","replace","onFileLoaded","fileInfo","type","every","includes","validWorker","Worker","postMessage","onerror","onmessage","e","slice","terminate","handleError","this","label","cssLabelClass","onError","Component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f08fc56a.chunk.js","sourcesContent":["import React from 'react';\n\nconst TdItem = ({ text, valid = true }) =>\n\tvalid ? <td>{text}</td> : <td className='red'>{text}</td>;\n\nconst TableItem = ({ user }) => {\n\tif (!user) return null;\n\n\tconst { validFields } = user;\n\treturn (\n\t\t<tr>\n\t\t\t<TdItem text={user.id} />\n\t\t\t<TdItem text={user.full_name} />\n\t\t\t<TdItem text={user.phone} valid={validFields.phone} />\n\t\t\t<TdItem text={user.email} valid={validFields.email} />\n\t\t\t<TdItem text={user.age} valid={validFields.age} />\n\t\t\t<TdItem text={user.experience} valid={validFields.experience} />\n\t\t\t<TdItem text={user.yearly_income} valid={validFields.yearly_income} />\n\t\t\t<TdItem text={user.has_children} valid={validFields.has_children} />\n\t\t\t<TdItem\n\t\t\t\ttext={user.license_states}\n\t\t\t\tvalid={validFields.license_states}\n\t\t\t/>\n\t\t\t<TdItem\n\t\t\t\ttext={user.expiration_date}\n\t\t\t\tvalid={validFields.expiration_date}\n\t\t\t/>\n\t\t\t<TdItem\n\t\t\t\ttext={user.license_number}\n\t\t\t\tvalid={validFields.license_number}\n\t\t\t/>\n\t\t\t<TdItem text={user.duplicate_with} />\n\t\t</tr>\n\t);\n};\n\nexport default TableItem;\n","import React from 'react';\nimport TableItem from './TableItem';\n\nconst Table = ({ users }) => {\n\treturn (\n\t\t<table className='table'>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>ID</th>\n\t\t\t\t\t<th>Full name</th>\n\t\t\t\t\t<th>Phone</th>\n\t\t\t\t\t<th>Email</th>\n\t\t\t\t\t<th>Age</th>\n\t\t\t\t\t<th>Experience</th>\n\t\t\t\t\t<th>Yearly Income</th>\n\t\t\t\t\t<th>Has children</th>\n\t\t\t\t\t<th>License states</th>\n\t\t\t\t\t<th>Expiration date</th>\n\t\t\t\t\t<th>License number</th>\n\t\t\t\t\t<th>Duplicate with</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{users.map((user) => (\n\t\t\t\t\t<TableItem key={user.id} user={user} />\n\t\t\t\t))}\n\t\t\t</tbody>\n\t\t</table>\n\t);\n};\n\nexport default Table;\n","export default __webpack_public_path__ + \"static/media/arrow-top.5283cba2.svg\";","import React from 'react';\nimport arrow from './arrow-top.svg';\nconst MsgToUpload = () => {\n\treturn (\n\t\t<div className='msgToUpload'>\n\t\t\t<p>Please upload a CSV file</p>\n\t\t\t<img src={arrow} alt='Please upload csv file' />\n\t\t</div>\n\t);\n};\n\nexport default MsgToUpload;\n","export default __webpack_public_path__ + \"static/media/spinner.e61bc095.svg\";","import React from 'react';\nimport spinner from './spinner.svg';\nconst Spinner = ({ msg = '' }) => {\n\treturn (\n\t\t<div className='spinner'>\n\t\t\t<img src={spinner} alt='Loading...' />\n\t\t\t<p>{msg}</p>\n\t\t</div>\n\t);\n};\n\nexport default Spinner;\n","import React, { Component } from 'react';\nimport CSVReader from 'react-csv-reader';\nimport Table from './components/Table';\nimport MsgToUpload from './components/MsgToUpload';\nimport './App.css';\nimport Spinner from './components/Spinner';\n\nclass App extends Component {\n\tstate = {\n\t\theaders: [],\n\t\tdata: null,\n\t\terror: null,\n\t\tloading: false,\n\t\tmsg: '',\n\t};\n\n\tparserOptions = {\n\t\theader: true,\n\t\tskipEmptyLines: true,\n\t\tbeforeFirstChunk: () => {\n\t\t\tthis.setState({\n\t\t\t\theaders: [],\n\t\t\t\tdata: null,\n\t\t\t\terror: null,\n\t\t\t\tloading: true,\n\t\t\t\tmsg: 'Uploading file...',\n\t\t\t});\n\t\t},\n\t\ttransformHeader: (item) => {\n\t\t\tconst header = item.toLowerCase().replace(/\\W/g, '_');\n\t\t\tthis.setState({\n\t\t\t\theaders: [...this.state.headers, header],\n\t\t\t});\n\t\t\treturn header;\n\t\t},\n\t};\n\n\tonFileLoaded = (data, fileInfo) => {\n\t\tif (fileInfo.type !== 'text/csv') {\n\t\t\treturn this.setState({\n\t\t\t\terror: 'File format is not correct',\n\t\t\t\tloading: false,\n\t\t\t});\n\t\t}\n\n\t\tthis.setState({ msg: 'Checking the file' });\n\t\tconst searched = ['full_name', 'phone', 'email'];\n\t\tconst res = searched.every((item) => this.state.headers.includes(item));\n\n\t\tif (res) {\n\t\t\tconst validWorker = new Worker('./valid-worker.js');\n\t\t\tvalidWorker.postMessage(data);\n\t\t\tvalidWorker.onerror = () =>\n\t\t\t\tthis.setState({ error: 'Something went wrong', loading: false });\n\t\t\tvalidWorker.onmessage = (e) => {\n\t\t\t\t/* Если большой файл, то лучше сделать пагинацию */\n\t\t\t\tconst users = e.data.slice(0, 500);\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tdata: users,\n\t\t\t\t\tloading: false,\n\t\t\t\t\tmsg: '',\n\t\t\t\t});\n\t\t\t\tvalidWorker.terminate();\n\t\t\t};\n\t\t} else {\n\t\t\tthis.setState({ error: 'File format is not correct', loading: false });\n\t\t}\n\t};\n\n\thandleError = (error) => this.setState({ error, loading: false });\n\n\trender() {\n\t\tconst { data, error, loading, msg } = this.state;\n\t\treturn (\n\t\t\t<div className='app'>\n\t\t\t\t<div className='header'>List of users</div>\n\t\t\t\t<div className='wrapper'>\n\t\t\t\t\t<CSVReader\n\t\t\t\t\t\tlabel='Import Users'\n\t\t\t\t\t\tcssLabelClass='btn'\n\t\t\t\t\t\tonError={this.handleError}\n\t\t\t\t\t\tonFileLoaded={this.onFileLoaded}\n\t\t\t\t\t\tparserOptions={this.parserOptions}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{data ? <Table users={data} /> : !loading && <MsgToUpload />}\n\t\t\t\t\t{loading && <Spinner msg={msg} />}\n\t\t\t\t\t{error && !loading && (\n\t\t\t\t\t\t<div className='msg msg-error'>{error}</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}